{% extends 'layouts/main.html' %}
{% block title %}Fragment{% endblock %}
{% block content %}

<div class="pattern" id="pattern-div">
  <div class="title-group-wrapper">
    <div class="title-group">
      <div class="fragment-icon" onclick="window.location.href='/'">
        <svg viewBox="204.776 175.709 99.239 99.523" xmlns="http://www.w3.org/2000/svg">
          <g transform="matrix(1, 0, 0, 1, 204.776596, 175.708939)">
            <path d="M98.891,31.017c-0.022-1.158-0.952-2.094-2.112-2.127l-18.492-0.527c-0.509-0.012-0.999,0.148-1.398,0.458   l-8.403,6.545l-1.024-7.76c-0.085-0.642-0.45-1.211-0.998-1.556c-0.546-0.344-1.218-0.428-1.834-0.227l-9.507,3.108L45.517,9.325   c-0.226-0.462-0.609-0.829-1.08-1.035L25.932,0.183c-0.646-0.283-1.388-0.235-1.994,0.128c-0.604,0.364-0.995,0.998-1.047,1.702   l-1.496,20.064c-0.037,0.503,0.101,1.002,0.391,1.414l21.965,31.168L24.698,79.888c-0.421,0.558-0.548,1.284-0.342,1.952   l4.983,16.149c0.185,0.601,0.62,1.09,1.194,1.346c0.281,0.124,0.582,0.188,0.883,0.188c0.313,0,0.626-0.068,0.917-0.202   l19.136-8.891c0.468-0.218,0.843-0.596,1.06-1.064l7.317-15.927l14.163,1.328c1.088,0.1,2.08-0.616,2.324-1.68l2.043-8.929   l19.99-14.965c0.562-0.421,0.886-1.085,0.872-1.787L98.891,31.017z M41.962,11.953l10.084,20.59   c0.478,0.973,1.599,1.447,2.628,1.11l6.088-1.991l-4.332,13.688c-0.29,0.918,0.058,1.918,0.855,2.457   c0.369,0.25,0.794,0.373,1.218,0.373c0.491,0,0.981-0.166,1.381-0.494l7.502-6.173c0.278-0.074,0.541-0.203,0.775-0.385   l10.782-8.397l14.512,0.413l-22.15,22.809c-0.417,0.429-0.638,1.01-0.615,1.605c0.025,0.597,0.295,1.156,0.746,1.549l3.117,2.716   c-0.105,0.183-0.19,0.377-0.236,0.587l-1.372,5.989L54.722,53.812c-0.029-0.091-0.065-0.183-0.107-0.271L38.409,19.866   c-0.387-0.805-1.225-1.289-2.118-1.226l-10.335,0.759l1.043-14.001L41.962,11.953z M28.838,81.62l18.696-24.756l3.568,0.178   l2.034,5.62c-0.168,0.135-0.321,0.293-0.445,0.478L32.394,93.145L28.838,81.62z" style="fill: rgb(254, 105, 104);"/>
            <path d="M36.481,54.049c-0.099-0.846-0.683-1.556-1.493-1.816L13.556,45.33c-0.789-0.253-1.653-0.038-2.229,0.558   L0.611,56.968c-0.487,0.503-0.702,1.211-0.576,1.899c0.125,0.689,0.575,1.276,1.207,1.575l14.167,6.722   c0.296,0.14,0.614,0.209,0.932,0.209c0.392,0,0.782-0.105,1.126-0.314l17.981-10.897C36.177,55.72,36.581,54.894,36.481,54.049z    M13.512,49.884l14.806,4.768c-0.085,0.001-0.171-0.001-0.258,0.01L6.62,57.367c-0.16,0.021-0.311,0.063-0.458,0.116L13.512,49.884   z" style="fill: rgb(254, 105, 104);"/>
          </g>
        </svg>
      </div>
      <h1 class="text-title" onclick="window.location.href='/'">Fragment</h1>
    </div>
  </div>
  <form name="note-body" data-ajax="false" method="POST" onsubmit="return validateTextArea();" id="note-body">
    <div class="textfield-body-wrapper" id="textfield-body-wrapper">
      <div class="textfield-body">
        <textarea name="textarea-note" class="textfield-content betterbar" placeholder="Write something! (markdown enabled)" id="textarea-note">{% if trigger_modal == True %}{{ original_text }}{% endif %}</textarea>
      </div>
    </div>
    <input name='does-it-explode' id="does-it-explode" type="hidden" value="none"/>
    <input name='does-it-explode-input' id="does-it-explode-input" type="hidden" value="none"/>
    <div class="button-group">
        <button class="action-button" type="submit" formaction="/"><i class="fas fa-link" style="margin-right: 10px;"></i>Link</button>
        <button class="action-button" type="button" onclick="preview();"><i class="fas fa-external-link-alt" style="margin-right: 10px;"></i>Preview</button>
        <button class="action-button" type="button" onclick="explode();"><i class="fas fa-bomb" style="margin-right: 10px;"></i>Explode</button>
    </div>
    <h2 id="explode-enabled" style="text-align: center; font-family: 'Inter', sans-serif; color: white; font-weight: 700; font-size: 20px; margin-top: 1%; display: none;"><i class="fas fa-bomb" style="margin-right: 10px;"></i>Explode is enabled. <a style="color: #3d88ff;" onclick="disableExplode();">Click to disable.</a></h2>
  </form>

  <div class="credits">
    <h3 class="me">Built with <i class="fas fa-coffee" style="margin-right: 5px; margin-left: 5px; color: #FE6968;"></i> by <a rel="noopener" target="_blank" href="https://rbansal.dev">Rohan Bansal</a></h3>
  </div>

  <div id="selector" class="trigger-{{ trigger_modal }}"></div>

  <div id="preview-link" style="display: none">
    <h1 style="text-align: center; font-family: 'Inter', sans-serif !important; font-weight: 700;">Preview</h1>
    <div class="textfield-body-wrapper" id="modal-textfield-wrapper">
      <div class="textfield-body betterbar" id='link-set' style="text-align: left; padding: 30px; overflow-y: scroll; background-color: white;">
      </div>
    </div>
  </div>

  <div id="explode-link" style="display: none">
    <h1 style="text-align: center; font-family: 'Inter', sans-serif !important; font-weight: 700;"><i class="fas fa-bomb" style="margin-right: 10px; color: #3d88ff;"></i>Explode</h1>
    <h3 style="text-align: center; font-family: 'Inter', sans-serif !important; font-weight: 400; margin-bottom: 30px;">Send a self-destructing message.</h3>
    <form id="explosion">
      <label class="rad-label">
        <input type="radio" value="firstview" class="rad-input" name="eType">
        <div class="rad-design"></div>
        <div class="rad-text">After first view</div>
      </label>
      <label class="rad-label">
        <input type="radio" value="30sec" class="rad-input" name="eType">
        <div class="rad-design"></div>
        <div class="rad-text">30 seconds after first open</div>
      </label>
      <label class="rad-label">
        <input type="radio" value="xviews" class="rad-input" name="eType">
        <div class="rad-design"></div>
        <div class="rad-text">After <input name="xviews" class="custom-input" type="number"/> views</div>
      </label>

      <label class="rad-label">
        <input type="radio" value="xsec" class="rad-input" name="eType">
        <div class="rad-design"></div>
        <div class="rad-text"><input name="xsec" class="custom-input" type="number"/> seconds after first open</div>
      </label>
      <label class="rad-label">
        <input type="radio" value="xhour" class="rad-input" name="eType">
        <div class="rad-design"></div>
        <div class="rad-text">In <input name="xhour" class="custom-input" type="number"/> hours</div>
      </label>
      <div style="width: 100%; text-align: center;">
        <button type="submit" id="explode-done" class="tingle-btn tingle-btn--default" style="text-align: center; margin-top: 30px;" >Done</button>
      </div>
    </form>
  </div>

  <div id="modal-link" style="display: none">
    <div style="display: flex; align-items: center; justify-content: center;">
      <div style="max-width: 50px; max-height: 50px; min-height: 50px; min-width: 50px; margin-right: 15px;">
        <svg viewBox="204.776 175.709 99.239 99.523" xmlns="http://www.w3.org/2000/svg">
          <g transform="matrix(1, 0, 0, 1, 204.776596, 175.708939)">
            <path d="M98.891,31.017c-0.022-1.158-0.952-2.094-2.112-2.127l-18.492-0.527c-0.509-0.012-0.999,0.148-1.398,0.458   l-8.403,6.545l-1.024-7.76c-0.085-0.642-0.45-1.211-0.998-1.556c-0.546-0.344-1.218-0.428-1.834-0.227l-9.507,3.108L45.517,9.325   c-0.226-0.462-0.609-0.829-1.08-1.035L25.932,0.183c-0.646-0.283-1.388-0.235-1.994,0.128c-0.604,0.364-0.995,0.998-1.047,1.702   l-1.496,20.064c-0.037,0.503,0.101,1.002,0.391,1.414l21.965,31.168L24.698,79.888c-0.421,0.558-0.548,1.284-0.342,1.952   l4.983,16.149c0.185,0.601,0.62,1.09,1.194,1.346c0.281,0.124,0.582,0.188,0.883,0.188c0.313,0,0.626-0.068,0.917-0.202   l19.136-8.891c0.468-0.218,0.843-0.596,1.06-1.064l7.317-15.927l14.163,1.328c1.088,0.1,2.08-0.616,2.324-1.68l2.043-8.929   l19.99-14.965c0.562-0.421,0.886-1.085,0.872-1.787L98.891,31.017z M41.962,11.953l10.084,20.59   c0.478,0.973,1.599,1.447,2.628,1.11l6.088-1.991l-4.332,13.688c-0.29,0.918,0.058,1.918,0.855,2.457   c0.369,0.25,0.794,0.373,1.218,0.373c0.491,0,0.981-0.166,1.381-0.494l7.502-6.173c0.278-0.074,0.541-0.203,0.775-0.385   l10.782-8.397l14.512,0.413l-22.15,22.809c-0.417,0.429-0.638,1.01-0.615,1.605c0.025,0.597,0.295,1.156,0.746,1.549l3.117,2.716   c-0.105,0.183-0.19,0.377-0.236,0.587l-1.372,5.989L54.722,53.812c-0.029-0.091-0.065-0.183-0.107-0.271L38.409,19.866   c-0.387-0.805-1.225-1.289-2.118-1.226l-10.335,0.759l1.043-14.001L41.962,11.953z M28.838,81.62l18.696-24.756l3.568,0.178   l2.034,5.62c-0.168,0.135-0.321,0.293-0.445,0.478L32.394,93.145L28.838,81.62z" style="fill: rgb(254, 105, 104);"/>
            <path d="M36.481,54.049c-0.099-0.846-0.683-1.556-1.493-1.816L13.556,45.33c-0.789-0.253-1.653-0.038-2.229,0.558   L0.611,56.968c-0.487,0.503-0.702,1.211-0.576,1.899c0.125,0.689,0.575,1.276,1.207,1.575l14.167,6.722   c0.296,0.14,0.614,0.209,0.932,0.209c0.392,0,0.782-0.105,1.126-0.314l17.981-10.897C36.177,55.72,36.581,54.894,36.481,54.049z    M13.512,49.884l14.806,4.768c-0.085,0.001-0.171-0.001-0.258,0.01L6.62,57.367c-0.16,0.021-0.311,0.063-0.458,0.116L13.512,49.884   z" style="fill: rgb(254, 105, 104);"/>
          </g>
        </svg>
      </div>
      <h1 style="text-align: center; font-family: 'Inter', sans-serif !important; font-weight: 700;">Link</h1>
    </div>
  
    <br>
    <h5 style="text-align: center; font-family: 'Inter', sans-serif;"><a id="hasha" target="_blank" href=""><i class="fas fa-external-link-alt" style="margin-right: 10px;"></i><span id="hashspan">{{ hash_ }}</span></a></h5>
    <h3 class="passphrase-info">To delete this content manually, enter this passphrase in the link above. <br>You will only see it <span style="color: #FE6968;">once</span>.</h3>
    <h4 id="passphrase-text">{{ passphrase }} <span class="copybutton"><a id="copybutton-text" data-tippy-content="Copied!" onclick="copyToClipboard('#passphrase-text');">Copy</a></span></h4>
    <br>
  </div>
</div>

{% endblock %}
